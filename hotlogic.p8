pico-8 cartridge // http://www.pico-8.com
version 32
__lua__
function _init()
 str={str={"(","f","v","t",")","&","f"},val=false}
	startgame()
	t=0
end

function _update60()
	t+=1
	_upd()
end

function _draw()
	cls()
	map()

	_drw()
end

function startgame()
	fadeperc,dpal=-1,{0,1,1,2,1,13,6,4,4,9,3,13,1,13,14}
	_drw=draw_start
	_upd=update_start
end

function str_map(char)
	if char=="(" then
		return 49,7,5
	elseif char==")" then
		return 51,7,5
	elseif char=="f" then
		return 1,8,2
	elseif char=="t" then
		return 3,11,3
	elseif char=="v" then
		return 5,9,4
	elseif char==">" then
		return 7,9,4
	elseif char=="#" then
		return 9,9,4
	elseif char=="~" then
		return 11,9,4
	elseif char=="&" then
		return 13,9,4
	end
end

-->8
function draw_start()
	local _c
	cls()
	pal(7,_c1)
	pal(5,_c2)
	if t%100>50 then
		_c1,_c2=8,9
		print("press ❎",48,90,9,1)
	else
		_c1,_c2=9,8
		print("press ❎",48,90,8,1)
	end
	spr(53,19,25,11,3)
	pal()
	
	print("christopher gibilisco", 23, 114, 14)
end

function draw_prob()
	local x=centx(#str.str)
	for s in all(str.str) do
		local m,c,c2=str_map(s)
		pal(7,c)
		pal(5,c2)
		spr(m,x,45,2,3)
		pal()
		x+=16
	end
	if t%100>50 then
		c3=8
	else
		c3=9
	end
	print("❎ true",12,108,c3)
	print("🅾️ false",81,108,c3)
end
-->8
function update_start()
	if btnp(❎) then	
		_upd=update_prob
		_drw=draw_prob
		fadeout()
	end
end

function update_prob()
	if btnp(4) then
		if str.val then 
			--bad
		else
			--good
		end
	elseif btnp(5) then
		if str.val then 
			--good
		else
			--bad
		end
		poke(0x5f5d,20)
	end
end
-->8
function dofade()
local p,kmax,col,k=flr(mid(0,fadeperc,1)*100)
 for j=1,15 do
  col = j
  kmax=flr((p+j*1.46)/22)
  for k=1,kmax do
   col=dpal[col]
  end
  pal(j,col,1)
 end
end

function checkfade()
 if fadeperc>0 then
  fadeperc=max(fadeperc-0.04,0)
  dofade()
 end
end

function wait(_wait)
 repeat
  _wait-=1
  flip()--?
 until _wait<0
end

function fadeout(spd,_wait)
	if (spd==nil) spd=0.04
 	if (_wait==nil) _wait=0
 	repeat
  	fadeperc=min(fadeperc+spd,1)
  	dofade()
 		flip()
 	until fadeperc==1
 	wait(_wait)
end

function centx(length)
	return 64-length*8
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000077777777700007777777777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000077777777700007777777777777000000000000000000777777777700000077777777777777770000000000000000000000000000000000000000
00077000000077777777700007777777777777000000000000000000777777777700000077777777777777770000000000000000000000000000000000000000
00700700000077755555500005555577755555000000000000000000777777777777700077777777777777770000000000000000000000000000000000000000
00000000000077755555500005555577755555000000000000000000555555555577700055555555555555550000000000000000000000000000000000000000
00000000000077700000000000000077700000000000000000000000555555555577700055555555555555550000000000000000000000000000000000000000
00000000000077700000000000000077700000000000000000000000000000000055577700000000000000000000000000000000000000000000000000000000
00000000000077700000000000000077700000000000000000000000000000000055577777777777777777770077777700000077000000000000000000000000
00000000000077700000000000000077700000000000000000000000000000000000077777777777777777770777777770000777000000077000000000000000
00000000000077777770000000000077700000000000000000000000000000000000077777777777777777777777777777777777000000777700000000000000
00000000000077777770000000000077700000000007000000070000000000000000077755555555555555557775555777777775000000777700000000000000
00000000000077777770000000000077700000000077700000777000000000000000077755555555555555557755555577777755000000577500000000000000
00000000000077755550000000000077700000000057770007775000000000000077755500000000000000005550000555555550000000055000000000000000
00000000000077755550000000000077700000000055777077755000000000000077755577777777777777775500000055555500000000000000000000000000
00000000000077700000000000000077700000000005577777550000777777777777700077777777777777770000000000000000000000000000000000000000
00000000000077700000000000000077700000000000557775500000777777777755500077777777777777770000000000000000000000000000000000000000
00000000000077700000000000000077700000000000055755000000777777777755500055555555555555550000000000000000000000000000000000000000
00000000000077700000000000000077700000000000005550000000555555555500000055555555555555550000000000000000000000000000000000000000
00000000000077700000000000000077700000000000000000000000555555555500000000000000000000000000000000000000000000000000000000000000
00000000000077700000000000000077700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000055500000000000000055500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000055500000000000000055500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000007000000000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000070000000000070000000000007770000777000777777007777777777700007770000000007777770000077777700077700077777700000
00000000000000000770000000000077000000000007770000777007777777707777777777700007770000000077777777000777777770077700777777770000
00000000000000007700000000000007700000000007770000777077777777777777777777700007770000000777777777707777777777077707777777777000
00000000000000007700000000000007700000000007770000777077775577775555777555500007770000000777755777707777557777077707777557777000
00000000000000077000000000000000770000000007770000777077750057770000777000000007770000000777500577707775005777077707775005777000
00000000000000777000000000000000777000000007770000777077700007770000777000000007770000000777000077707770000777077707770000777000
00000000000000777000000000000000777000000007770000777077700007770000777000000007770000000777000077707770000000077707770000000000
00000000000007770000000000000000077700000007770000777077700007770000777000000007770000000777000077707770000000077707770000000000
00000000000007770000000000000000077700000007770000777077700007770000777000000007770000000777000077707770000000077707770000000000
00000000000007770000000000000000077700000007777777777077700007770000777000000007770000000777000077707770000000077707770000000000
00000000000007770000000000000000077700000007777777777077700007770000777000000007770000000777000077707770077777077707770000000000
00000000000007770000000000000000077700000007777777777077700007770000777000000007770000000777000077707770077777077707770000000000
00000000000007770000000000000000077700000007775555777077700007770000777000000007770000000777000077707770077777077707770000000000
00000000000000777000000000000000777000000007770000777077700007770000777000000007770000000777000077707770055777077707770000000000
00000000000000777000000000000000777000000007770000777077700007770000777000000007770000000777000077707770055777077707770000777000
00000000000000077000000000000000770000000007770000777077700007770000777000000007770000000777000077707770000777077707770000777000
00000000000000007700000000000007700000000007770000777077770077770000777000000007770000000777700777707777007777077707777007777000
00000000000000007700000000000007700000000007770000777077777777770000777000000007777777777777777777707777777777077707777777777000
00000000000000000770000000000077000000000007770000777057777777750000777000000007777777777577777777505777777775077705777777775000
00000000000000000070000000000070000000000007770000777055777777550000777000000007777777777557777775505577777755077705577777755000
00000000000000000007000000000700000000000005550000555005555555500000555000000005555555555055555555000555555550055500555555550000
00000000000000000000000000000000000000000005550000555000555555000000555000000005555555555005555550000055555500055500055555500000
